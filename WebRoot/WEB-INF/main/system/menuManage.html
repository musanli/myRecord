<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>菜单管理</title>
	<link href="${base}/res/css/base.css" rel="stylesheet" type="text/css" />
	<script src="${base}/res/easyui/jquery.min.js" type="text/javascript"></script>
	<script src="${base}/res/lhgDialog/lhgdialog.min.js" type="text/javascript"></script>
	<script src="${base}/res/js/commonSet.js" type="text/javascript"></script>
	<script src="${base}/res/js/base.js" type="text/javascript"></script>
	<link href="${base}/res/css/default/easyui.css" rel="stylesheet" type="text/css" />
	<link href="${base}/res/css/icon.css" rel="stylesheet" type="text/css" />
	<script src="${base}/res/easyui/jquery.easyui.min.js" type="text/javascript"></script>
	<script src="${base}/res/js/curdtools.js" type="text/javascript"></script>
	<script src="${base}/res/js/local/easyui-lang-zh_CN.js" type="text/javascript"></script>
	<link href="${base}/res/css/zTreeStyle/zTreeStyle.css" rel="stylesheet" type="text/css" />
	<script src="${base}/res/js/jquery.ztree.core-3.5.js" type="text/javascript"></script>
	<script src="${base}/res/js/jquery.ztree.excheck-3.5.min.js" type="text/javascript"></script>
</head>
<body>
 <div class="easyui-layout" data-options="fit:true">
                <div data-options="region:'west',split:true,border:true" title="菜单列表" style="width:200px">
                <ul id="treeDemo" class="ztree"></ul>
                </div>
                <div data-options="region:'center',border:true" title="菜单信息">
                <iframe name="_menuFrame" id="_menuFrame" width="100%" height="100%" frameborder="2" scrolling="auto" src="${base}/main/menu/showList.do">
				</iframe>
                </div>
            </div>


<script type="text/javascript" >
function onClick(event, treeId, treeNode, clickFlag) {
	_menuFrame.location.href ="${base}/main/menu/showList.do?id="+treeNode.id+"&folder="+treeNode.isParent;
	}	
var setting = {
		async:{
			enable: true,
			type: "POST",
			otherParam : [ "target", "_menuFrame" ],//此处说明点击列表打开数据的位置
			url:"${base}/main/menu/showMenu.do"},
			view:{selectedMulti:false},
			callback: {onClick: onClick},
			data:{
				simpleData: {
				enable: true,
				idKey: "id",
				pIdKey: "pid",
				rootPId: 0
				}
			}
		};

		
$(document).ready(function(){
			$.fn.zTree.init($("#treeDemo"), setting);
		});
</script>

</body>
</html>